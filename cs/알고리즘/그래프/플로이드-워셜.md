# 플로이드-워셜 알고리즘이란?

> 그래프에서 최단 거리를 구하는 알고리즘으로, 주요 특징은 아래와 같다.

| <center>기능</center>         | <center>특징</center>                                                                    | <center>시간 복잡도(노드 수: V)</center> |
| :---------------------------- | :--------------------------------------------------------------------------------------- | :--------------------------------------- |
| 모든 노드 간에 최단 경로 탐색 | - 음수 가중치 엣지가 있어도 수행할 수 있음 - 동적 계획법의 원리를 이용해 알고리즘에 접근 | O(V^3)                                   |

시간 복잡도가 높으므로 알고리즘 적용 시 주의가 필요하다.

## 플로이드-워셜의 원리

A노드에서 B노드까지 최단 경로를 구했다고 가정했을 때 최단 경로 위에 K 노드가 존재한다면 그것을 이루는 부분 경로 역시 최단 경로라는 것이다.

![floyd-warshall](/cs/알고리즘/img/floyd-warshall.png)

색칠된 엣지 경로가 1 -> 5 최단 경로라면 1 -> 4 최단 경로와 4 -> 5 최단 경로 역시 색칠된 엣지로 이루어질 수밖에 없다. 즉, 전체 경로의 최단 경로는 부분 경로의 최단 경로의 조합으로 이루어 진다는 의미이다. 해당 원리로 다음과 같은 점화식을 도출할 수 있다.

> 플로이드-워셜 점화식 \
> D[S][E] = Math.min(D[S][E], D[S][K] + D[K][E])

## 플로이드-워셜 알고리즘 구현 방법

### 1. 최단 거리 리스트 선언 및 초기화

D[S][E]는 노드 S에서 노드 E까지의 최단 거리를 저장하는 리스트(인접 행렬)이고,
S와 E의 값이 같은 칸은 0, 다른 칸은 무한대(큰 값)으로 초기화한다.
S == E는 자기 자신에게 가는데 걸리는 최단 경로 값이므로 0이다.

![floyd-warshall-init](/cs/알고리즘/img/floyd-warshall-init.png)

### 2. 최단 거리 리스트에 그래프 데이터 저장

출발 노드: S, 도착 노드: E, 엣지 가중치: W라고 했을 때 D[S][E] = W로 엣지의 가중치를 리스트에 입력한다.

![floyd-warshall-insert](/cs/알고리즘/img/floyd-warshall-insert.png)

### 3. 점화식으로 리스트 업데이트

점화식을 3중 for문의 형태로 반복하면서 리스트의 값을 업데이트

> 슈도 코드

```
for 경유지 K에 관해 (1~N)
    for 출발 노드 S에 관해 (1~N)
        for 도착 노드 E에 관해 (1~N)
            D[S][E] = Math.min(D[S][E], D[S][K] + D[K][E])
```

![floyd-warshall-update](/cs/알고리즘/img/floyd-warshall-update.png)

이렇게 최종적으로 업데이트된 최단 거리 리스트는 모든 노드 간에 최단 거리를 가지고 있으며 아직도 무한대의 값을 가지고 있는 부분은 도달할 수 없는 노드라는 뜻이 된다.
