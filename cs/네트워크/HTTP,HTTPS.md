## HTTP & HTTPS

---

### HTTP(HyperText Transper Protocol)

- 인터넷 상에서 클라이언트와 서버가 자원을 주고 받을 때 사용하는 통신 규약

```
HTTP는 텍스트 교환이므로, 누군가 네트워크에서 신호를 가로채면 내용이 노출되는 보안 이슈가 존재한다.
이러한 보안 문제를 해결해주는 프로토콜이 'HTTPS'
```

### HTTPS(HyperText Transper Protocol Secure)

- 인터넷 상에서 정보를 암호화하는 SSL 프로토콜을 사용하여 클라이언트와 서버가 자원을 주고받을 때 사용하는 통신 규약

```
HTTPS는 텍스트를 암호화한다. (공개키 암호화 방식으로)
```

### HTTPS 통신 흐름

1. 애플리케이션 서버를 만드는 기업 A는 HTTPS를 적용하기 위해 공개키와 개인키를 생성
2. 신뢰할 수 있는 CA 기업을 선정하고, 그 기업에게 공개키 관리를 부탁하면 계약
   > CA란?: Certificate Authority로, 공개키를 저장해주는 신뢰성이 검증된 민간 기업
3. CA 기업은 A 기업의 이름, A 서버 공개키, 공개키 암호화 방법을 담은 인증서를 만들고, 해당 인증서를 CA 기업의 개인키로 암호화하여 A 서버에게 제공
4. A 서버의 공개키로 암호화된 HTTPS 요청이 아닌 요청이 오면, CA 기업으로부터 받은 인증서를 클라이언트에게 건내준다.
5. 클라이언트가 특정 파일을 A 서버에게 요청했다고 가정하면, HTTPS 요청이 아니기 때문에 3번 절차의 인증서를 받게된다.
6. 브라우저는 인증서를 해독한 후 A 서버의 공개키를 획득
7. 클라이언트가 A서버와 HandShaking 과정에서 주고받은 난수를 조합하여 대칭키를 생성한 뒤, A서버의 공개키로 암호화하여 서버로 전달
8. A서버는 암호화된 대칭키를 자신의 개인키로 복호화하여 클라이언트와 동일한 대칭키를 획득
9. 이후 요청부터는 대칭키를 사용하여 암호화 복호화를 진행

HTTPS도 무조건 안전한 것은 아니다. (신뢰성있는 CA 기업이 아닌, 자체 인증서를 발급한 경우)
이 때는 HTTPS를 사용하더라도 브라우저로 부터 '안전하지 않은 사이트' 와 같은 알림을 받게된다.
